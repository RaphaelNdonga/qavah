{"version":3,"sources":["utils.js","App.jsx","pages/ProjectInfo.jsx","pages/NewProject.jsx","index.js"],"names":["Huffman","Context","createContext","getContract","chainId","contractAddresses","getAbi","abi","getSymbol","4","1337","44787","decode","text","replace","_","count","chr","repeat","treeFromText","b","TreeBuilder","build","CoreHelpers","isArray","a","constructor","Array","lpad","length","Tree","this","root","Node","prototype","encode","bitStringToString","encodeBitString","j","g","f","e","i","stringToBitString","split","isLeaf","value","c","d","bitValue","push","String","fromCharCode","parseInt","substr","join","toString","h","pop","charCodeAt","leafCache","generateLeafCache","left","right","encodeTree","decodeTree","parseNode","__hasProp","Object","hasOwnProperty","buildFrequencyTable","combineTable","compressCombinedTable","call","sort","frequencySorter","shift","App","useParams","navigate","useNavigate","useState","store","setStore","projects","setProjects","updateStore","update","getProjects","window","contract","message","console","error","disabled","useEffect","undefined","ethereum","provider","ethers","providers","Web3Provider","Contract","on","off","Provider","to","className","map","p","decodedOnce","JSON","parse","imageMeta","tree","encodedImage","percentage","fundedAmount","mul","div","requestedAmount","toNumber","id","key","replaceAll","match","title","description","style","width","utils","formatEther","onClick","location","reload","ProjectInfo","projectId","useContext","project","setProject","input","useRef","getProject","filters","FundsDonated","FundsClaimed","toClaim","sub","claimedAmount","donators","donatedAmounts","selectedAddress","creator","request","method","signer","getSigner","claimProjectFunds","tx","wait","ref","type","name","placeholder","parseEther","current","donateToProject","NewProject","onSubmit","preventDefault","elements","target","createProject","encoded","stringify","huffman","_w","rows","onChange","onFileSelected","step","event","selectedFile","files","reader","FileReader","img","document","createElement","body","appendChild","ditherjs","DitherJS","onload","src","result","setTimeout","dither","canvas","querySelector","ctx","getContext","data","getImageData","out","x","group","readAsDataURL","ReactDOM","render","StrictMode","path","index","element","getElementById"],"mappings":"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","file":"static/js/main.70c04d36.chunk.js","sourcesContent":["import { createContext } from 'react'\nimport contractAddresses from './contracts/contract-address.json'\nimport { abi } from './contracts/Contract.json'\n\nexport const Context = createContext()\n\nexport const getContract = chainId => contractAddresses[chainId]\nexport const getAbi = () => abi\nexport const getSymbol = chainId => ({\n  4: 'ETH',\n  1337: 'ETH',\n  44787: 'CELO',\n})[chainId]\n\nexport const encode = (text) => text.replace(/([ \\w])\\1+/g, (group, chr) => group.length + chr );\nexport const decode = (text) => text.replace(/(\\d+)([ \\w])/g, (_, count, chr) => chr.repeat(count));\n\nexport let Huffman;Huffman={treeFromText:function(b){var a;a=new Huffman.TreeBuilder(b);return a.build()}};Huffman.CoreHelpers={isArray:function(a){return !!(a&&a.constructor===Array)},lpad:function(a,b){b=b||8;while(a.length<b){a=\"0\"+a}return a}};Huffman.Tree=function(a){this.root=a;this.root=this.root||new Huffman.Tree.Node();return this};Huffman.Tree.prototype.encode=function(a){return this.bitStringToString(this.encodeBitString(a))};Huffman.Tree.prototype.decode=function(j){var g,f,e,a,c,i,h,b;a=this.stringToBitString(j);i=\"\";b=this.root;f=a.split(\"\");for(g=0,e=f.length;g<e;g++){h=f[g];c=h===\"0\"?\"left\":\"right\";b=b[c];if(b.isLeaf()){i+=b.value;b=this.root}}return i};Huffman.Tree.prototype.encodeBitString=function(f){var c,b,a,d,e;e=\"\";b=f.split(\"\");for(c=0,a=b.length;c<a;c++){d=b[c];e+=this.bitValue(d)}return e};Huffman.Tree.prototype.bitStringToString=function(a){var d,b,f,c,e;e=8-a.length%8;for(c=0;(0<=e?c<e:c>e);(0<=e?c+=1:c-=1)){a+=\"0\"}f=(function(){d=[];b=a.length;for(c=0;(0<=b?c<b:c>b);c+=8){d.push(String.fromCharCode(parseInt(a.substr(c,8),2)))}return d})();return f.join(\"\")+e.toString()};Huffman.Tree.prototype.stringToBitString=function(c){var e,d,b,a,f,h,g;g=c.split(\"\");h=parseInt(g.pop());g=(function(){e=[];b=g;for(d=0,a=b.length;d<a;d++){f=b[d];e.push(Huffman.CoreHelpers.lpad(f.charCodeAt(0).toString(2)))}return e})();g=g.join(\"\");return g.substr(0,g.length-h)};Huffman.Tree.prototype.bitValue=function(b){var a;if(!((typeof(a=this.leafCache)!==\"undefined\"&&a!==null))){this.generateLeafCache()}return this.leafCache[b]};Huffman.Tree.prototype.generateLeafCache=function(a,b){this.leafCache=(typeof this.leafCache!==\"undefined\"&&this.leafCache!==null)?this.leafCache:{};a=a||this.root;b=b||\"\";if(a.isLeaf()){return(this.leafCache[a.value]=b)}else{this.generateLeafCache(a.left,b+\"0\");return this.generateLeafCache(a.right,b+\"1\")}};Huffman.Tree.prototype.encodeTree=function(){return this.root.encode()};Huffman.Tree.decodeTree=function(a){return new Huffman.Tree(Huffman.Tree.parseNode(a))};Huffman.Tree.parseNode=function(b){var a;a=new Huffman.Tree.Node();if(Huffman.CoreHelpers.isArray(b)){a.left=Huffman.Tree.parseNode(b[0]);a.right=Huffman.Tree.parseNode(b[1])}else{a.value=b}return a};Huffman.Tree.Node=function(){this.left=(this.right=(this.value=null));return this};Huffman.Tree.Node.prototype.isLeaf=function(){return(this.left===this.right)&&(this.right===null)};Huffman.Tree.Node.prototype.encode=function(){return this.value?this.value:[this.left.encode(),this.right.encode()]};var __hasProp=Object.prototype.hasOwnProperty;Huffman.TreeBuilder=function(a){this.text=a;return this};Huffman.TreeBuilder.prototype.build=function(){var a,b;b=this.buildFrequencyTable();a=this.combineTable(b);return Huffman.Tree.decodeTree(this.compressCombinedTable(a))};Huffman.TreeBuilder.prototype.buildFrequencyTable=function(){var d,c,b,a,e,h,f,g;g={};c=this.text.split(\"\");for(d=0,b=c.length;d<b;d++){e=c[d];g[e]=(typeof g[e]!==\"undefined\"&&g[e]!==null)?g[e]:0;g[e]+=1}f=[];a=g;for(e in a){if(!__hasProp.call(a,e)){continue}h=a[e];f.push([h,e])}f.sort(this.frequencySorter);return f};Huffman.TreeBuilder.prototype.frequencySorter=function(d,c){return d[0]>c[0]?1:(d[0]<c[0]?-1:0)};Huffman.TreeBuilder.prototype.combineTable=function(b){var c,a;while(b.length>1){c=b.shift();a=b.shift();b.push([c[0]+a[0],[c,a]]);b.sort(this.frequencySorter)}return b[0]};Huffman.TreeBuilder.prototype.compressCombinedTable=function(a){var b;b=a[1];return Huffman.CoreHelpers.isArray(b)?[this.compressCombinedTable(b[0]),this.compressCombinedTable(b[1])]:b};\n","import React, { useState, useEffect } from 'react'\nimport { Outlet, Link, useParams, useNavigate } from \"react-router-dom\"\nimport { ethers } from 'ethers'\nimport { Context, getContract, getAbi, getSymbol, Huffman, decode } from './utils'\nimport './index.css'\n\nfunction App () {\n  const { chainId } = useParams()\n  const navigate = useNavigate()\n  const [ store, setStore ] = useState({})\n\n  const [ projects, setProjects ] = useState([])\n\n  const updateStore = update => setStore({ ...store, ...update })\n\n  const getProjects = async () => {\n    try {\n      window.projects = await window.contract.getProjects()\n      setProjects(window.projects)\n      updateStore({ message: '' })\n    } catch (error) {\n      console.error(error)\n      updateStore({ message: 'Make sure you’re on the right network! Then reload the page.', disabled: true })\n    }\n  }\n\n  useEffect(() => {\n    if (window.ethereum === undefined) {\n      return updateStore({ message: 'Please make sure you have MetaMask! Then reload the page.', disabled: true })\n    }\n    window.provider = new ethers.providers.Web3Provider(window.ethereum)\n    window.contract = new ethers.Contract(getContract(chainId), getAbi(), window.provider)\n    getProjects()\n    window.contract.on('ProjectCreated', getProjects)\n    window.contract.on('FundsDonated', getProjects)\n    window.contract.on('FundsClaimed', getProjects)\n    return () => {\n      window.contract.off('ProjectCreated', getProjects)\n      window.contract.off('FundsDonated', getProjects)\n      window.contract.off('FundsClaimed', getProjects)\n    }\n  }, [])\n\n  return (\n    <Context.Provider value={{ store, updateStore }}>\n      <main>\n        <header>\n          <h1>qavah</h1>\n          <Link to='new' className={store.disabled && 'disabled'}>New project</Link>\n        </header>\n        <h2>All projects</h2>\n        <div className=\"projects\">\n          {projects.map((p, i) => {\n            const huffman2 = Huffman.Tree.decodeTree(JSON.parse(p.imageMeta).tree)\n            const decodedOnce = huffman2.decode(p.encodedImage)\n            const percentage = p.fundedAmount.mul(10*10).div(p.requestedAmount).toNumber()\n            return (\n              <Link to={p.id} className='Project' key={i}>\n                <pre className='image'>{decode(decodedOnce).replaceAll('W', ' ').replaceAll('B', '•').match(/.{1,80}/g).join('\\n')}</pre>\n                <div className=\"content\">\n                  <div className=\"title\">\n                    <h3>{p.title}</h3>\n                  </div>\n                  <p className='description'>{p.description}</p>\n                  <div className=\"bottom\">\n                    <div>\n                      <div className='progress'><div style={{ width: percentage + '%' }} /></div>\n                      <span className='amounts'>{percentage}% funded of <b>{ethers.utils.formatEther(p.requestedAmount)} {getSymbol(chainId)}</b></span>\n                    </div>\n                  </div>\n                </div>\n              </Link>\n            )\n          })}\n        </div>\n        <div className='Outlet'>\n          <Outlet />\n          <div className=\"overlay\" onClick={() => navigate(`/${chainId}`)} />\n        </div>\n        {store.message && (\n          <div className='Message'>\n            <span>{store.message}</span>\n            <button onClick={() => store.disabled ? window.location.reload() : updateStore({ message: '' })}>x</button>\n          </div>\n        )}\n      </main>\n    </Context.Provider>\n  )\n}\n\nexport default App\n","import React, { useRef, useState, useEffect, useContext } from 'react'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport { ethers } from 'ethers'\nimport { Context, getContract, getAbi, getSymbol, Huffman, decode } from '../utils'\n\nfunction ProjectInfo () {\n  const { chainId, projectId } = useParams()\n  const navigate = useNavigate()\n  const { updateStore } = useContext(Context)\n  \n  const [ project, setProject ] = useState(null)\n  const input = useRef()\n\n  useEffect(() => {\n    if (window.ethereum === undefined) {\n      return updateStore({ message: 'Please make sure you have MetaMask! Then reload the page.' })\n    }\n    const provider = new ethers.providers.Web3Provider(window.ethereum)\n    const contract = new ethers.Contract(getContract(chainId), getAbi(), provider)\n    const getProject = async () => {\n      try {\n        const project = await contract.getProject(projectId)\n        if (!project.title) return\n        setProject(project)\n      } catch (error) {\n        console.error(error)\n        updateStore({ message: error.message, disabled: true })\n      }\n    }\n    getProject()\n    contract.on(contract.filters.FundsDonated(projectId), getProject)\n    contract.on(contract.filters.FundsClaimed(projectId), getProject)\n    return () => {\n      contract.off(contract.filters.FundsDonated(projectId), getProject)\n      contract.off(contract.filters.FundsClaimed(projectId), getProject)\n    }\n  }, [])\n\n  if (!project) return null\n\n  const huffman2 = Huffman.Tree.decodeTree(JSON.parse(project.imageMeta).tree)\n  const decodedOnce = huffman2.decode(project.encodedImage)\n  const percentage = project.fundedAmount.mul(10*10).div(project.requestedAmount).toNumber()\n  const toClaim = ethers.utils.formatEther(project.fundedAmount.sub(project.claimedAmount))\n  \n  return (\n    <div className='ProjectInfo'>\n      <div>\n        <div className=\"top\">\n          <Link to={`/${chainId}`}>Back</Link>\n          <span className='amounts'>{percentage}% funded of <b>{ethers.utils.formatEther(project.requestedAmount)} {getSymbol(chainId)}</b></span>\n        </div>\n        <div className='progress'><div style={{ width: percentage + '%' }} /></div>\n      </div>\n      <pre className='image'>{decode(decodedOnce).replaceAll('W', ' ').replaceAll('B', '•').match(/.{1,80}/g).join('\\n')}</pre>\n      <div className=\"content\">\n        <div className=\"title\">\n          <h3>{project.title}</h3>\n        </div>\n        <p className='description'>{project.description}</p>\n        <ul>\n          {project.donators.map((d, i) =>\n            <li key={'li' + i}>{d} donated {ethers.utils.formatEther(project.donatedAmounts[i])} {getSymbol(chainId)}</li>\n          )}\n        </ul>\n        <div className=\"interact\">\n          {+window.ethereum.selectedAddress === +project.creator ? (\n            +toClaim ? (\n              <button onClick={async () => {\n                try {\n                  await window.ethereum.request({ method: \"eth_requestAccounts\" })\n                  \n                  const provider = new ethers.providers.Web3Provider(window.ethereum)\n                  const signer = provider.getSigner()\n                  const contract = new ethers.Contract(getContract(chainId), getAbi(), signer)\n\n                  const tx = await contract.claimProjectFunds(projectId)\n                  updateStore({ message: 'Please wait…' })\n                  await tx.wait()\n                  \n                } catch (error) {\n                  console.error(error)\n                  updateStore({ message: error.message })\n                }\n              }}>\n                Claim {toClaim} {getSymbol(chainId)}\n              </button>\n            ) : (\n              <span>Nothing to claim for now</span>\n            )\n          ) : (\n            <>\n              <span>I wish to help with</span>\n              <input ref={input} type=\"number\" name=\"amount\" placeholder='1.0' />\n              <button onClick={async () => {\n                try {\n                  await window.ethereum.request({ method: \"eth_requestAccounts\" })\n  \n                  const provider = new ethers.providers.Web3Provider(window.ethereum)\n                  const signer = provider.getSigner()\n                  const contract = new ethers.Contract(getContract(chainId), getAbi(), signer)\n    \n                  const value = ethers.utils.parseEther(input.current.value)\n                  const tx = await contract.donateToProject(projectId, { value })\n                  updateStore({ message: 'Please wait…' })\n                  await tx.wait()\n                  \n                } catch (error) {\n                  console.error(error)\n                  updateStore({ message: error.message })\n                }\n              }}>\n                Donate now\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProjectInfo","import React, { useContext } from 'react'\nimport { Link, useParams, useNavigate } from \"react-router-dom\"\nimport { ethers } from 'ethers'\nimport DitherJS from 'ditherjs'\nimport { Context, getContract, getAbi, Huffman, encode } from '../utils'\n\nfunction NewProject () {\n  const { chainId } = useParams()\n  const navigate = useNavigate()\n  const { updateStore } = useContext(Context)\n\n  return (\n    <form className='NewProject' onSubmit={async e => {\n      try {\n        e.preventDefault()\n        const { elements } = e.target\n\n        await window.ethereum.request({ method: \"eth_requestAccounts\" })\n\n        const provider = new ethers.providers.Web3Provider(window.ethereum)\n        const signer = provider.getSigner()\n        const contract = new ethers.Contract(getContract(chainId), getAbi(), signer)\n\n        const tx = await contract.createProject(\n          elements['title'].value,\n          elements['description'].value,\n          ethers.utils.parseEther(elements['requestedAmount'].value),\n          window.encoded,\n          JSON.stringify({ tree: window.huffman.encodeTree(), _w: 80 }),\n        )\n        updateStore({ message: 'Please wait…' })\n        await tx.wait()\n        navigate(`/${chainId}`)\n\n      } catch (error) {\n        console.error(error)\n        updateStore({ message: error.message })\n      }\n    }}>\n      <textarea name=\"title\" placeholder='Your project title' rows=\"2\"></textarea>\n      <textarea name=\"description\" placeholder='Give it some context…' rows=\"10\"></textarea>\n      <div className='flex'>\n        <input type='file' name='image' onChange={onFileSelected} />\n        <input name='requestedAmount' type='number' step='0.001' placeholder='Amount' />\n      </div>\n      <div className='action'>\n        <Link to={`/${chainId}`}>Back</Link>\n        <button type='submit'>Create project</button>\n      </div>\n    </form>\n  )\n}\n\nexport default NewProject\n\nfunction onFileSelected(event) {\n  var selectedFile = event.target.files[0]\n  var reader = new FileReader()\n  if (!selectedFile) return\n\n  const img = document.createElement('img')\n  img.width = 80\n  img.title = selectedFile.name\n  document.body.appendChild(img)\n\n  const ditherjs = new DitherJS({\n    \"step\": 1,\n    \"palette\": [ [0, 0, 0], [255, 255, 255] ],\n    \"algorithm\": \"atkinson\" // one of [\"ordered\", \"diffusion\", \"atkinson\"]\n  })\n  reader.onload = function(event) {\n    img.src = event.target.result\n    setTimeout(async () => {\n      ditherjs.dither(img)\n      const canvas = document.querySelector('canvas:last-child')\n      const ctx = canvas.getContext('2d')\n      const data = ctx.getImageData(0, 0 * canvas.width / 16 / 2, canvas.width, 9 * canvas.width / 16).data\n      const out = [...data].map(x => x ? 'W' : 'B').join('').match(/.{1,4}/g).map(x => x[0]).join('')\n      const e = encode(out)\n      \n      window.huffman = Huffman.treeFromText(e)\n      window.encoded = window.huffman.encode(e)\n    })\n  }\n  reader.readAsDataURL(selectedFile)\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\n\nimport App from './App'\nimport ProjectInfo from './pages/ProjectInfo'\nimport NewProject from './pages/NewProject'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\">\n          <Route index element={<Navigate to=\"/4\" replace />} />\n          <Route path=\":chainId\" element={<App />}>\n            <Route path=\"new\" element={<NewProject />} />\n            <Route path=\":projectId\" element={<ProjectInfo />} />\n          </Route>\n        </Route>\n      </Routes>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}